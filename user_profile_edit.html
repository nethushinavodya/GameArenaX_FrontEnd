<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Edit Profile - Gaming Profile Manager</title>
    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="stylesheet" href="assets/css/tailwind.css" />
    <link rel="stylesheet" href="assets/css/home.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fgamingpro2929back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.8"></script>
</head>
<body class="bg-background min-h-screen text-text-primary font-inter">
    <!-- Navigation Header -->
    <nav class="bg-surface border-b border-surface-700 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <svg class="w-10 h-10 text-primary" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="40" height="40" rx="8" fill="currentColor"/>
                        <path d="M12 16L20 24L28 16" stroke="#0F172A" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                        <circle cx="20" cy="12" r="3" fill="#0F172A"/>
                    </svg>
                    <span class="ml-3 text-xl font-bold text-gaming-heading">GameHub</span>
                </div>
                
                <!-- Navigation Links -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="user_profile_view.html" class="text-text-secondary hover:text-text-primary transition-colors">Profile</a>
                    <a href="streamer_application.html" class="text-text-secondary hover:text-text-primary transition-colors">Streamer</a>
                    <a href="player_application.html" class="text-text-secondary hover:text-text-primary transition-colors">Player</a>
                </div>

                <!-- Mobile Menu Button -->
                <div class="md:hidden">
                    <button type="button" class="text-text-secondary hover:text-text-primary p-2" onclick="toggleMobileMenu()">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Page Header -->
        <div class="mb-8">
            <div class="flex items-center mb-4">
                <a href="user_profile_view.html" class="text-text-secondary hover:text-primary transition-colors mr-4">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                </a>
                <div>
                    <h1 class="text-3xl font-bold text-gaming-heading">Edit Profile</h1>
                    <p class="text-text-secondary">Update your gaming profile information</p>
                </div>
            </div>
        </div>

        <!-- Edit Profile Form -->
        <form id="profileEditForm" class="space-y-8">
            <!-- Profile Picture Section -->
            <div class="bg-surface rounded-gaming-card shadow-gaming border border-surface-700 p-6 sm:p-8">
                <h2 class="text-xl font-semibold text-gaming-heading mb-6 flex items-center">
                    <svg class="w-6 h-6 text-primary mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                    </svg>
                    Profile Picture
                </h2>
                
                <div class="flex flex-col sm:flex-row items-center sm:items-start gap-6">
                    <!-- Current Profile Picture -->
                    <div class="relative group">
                        <div class="w-32 h-32 rounded-full overflow-hidden border-4 border-primary glow-primary group-hover:glow-primary-strong transition-all duration-gaming">
                            <img id="profilePreview" src="https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=400" alt="Profile Picture" class="w-full h-full object-cover" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" loading="lazy" />
                        </div>
                        <!-- Gaming Badge -->
                        <div class="absolute -bottom-2 -right-2 bg-accent text-background text-xs font-bold px-2 py-1 rounded-full border-2 border-surface">
                            LVL 42
                        </div>
                    </div>

                    <!-- Upload Controls -->
                    <div class="flex-1 w-full">
                        <!-- Drag and Drop Area -->
                        <div id="dropZone" class="border-2 border-dashed border-surface-700 rounded-gaming-card p-6 text-center hover:border-primary transition-colors duration-gaming cursor-pointer bg-surface-800/50" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="document.getElementById('profilePicture').click()">
                            <svg class="w-12 h-12 text-text-secondary mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                            </svg>
                            <p class="text-text-primary font-medium mb-2">Drop your image here or click to browse</p>
                            <p class="text-text-secondary text-sm">PNG, JPG, GIF up to 5MB</p>
                        </div>
                        
                        <input type="file" id="profilePicture" name="profilePicture" accept="image/*" class="hidden" onchange="handleFileSelect(event)" />
                        
                        <!-- Upload Status -->
                        <div id="uploadStatus" class="mt-4 hidden">
                            <div class="flex items-center text-sm">
                                <div class="w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin mr-2"></div>
                                <span class="text-text-secondary">Uploading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Personal Information Section -->
            <div class="bg-surface rounded-gaming-card shadow-gaming border border-surface-700 p-6 sm:p-8">
                <h2 class="text-xl font-semibold text-gaming-heading mb-6 flex items-center">
                    <svg class="w-6 h-6 text-primary mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                    </svg>
                    Personal Information
                </h2>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Read-only UUID -->
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-text-secondary mb-2">UUID (Read-only)</label>
                        <div class="bg-surface-800 border border-surface-700 rounded-gaming px-4 py-3 text-gaming-data text-sm text-text-secondary">
                            550e8400-e29b-41d4-a716-446655440000
                        </div>
                    </div>

                    <!-- Email -->
                    <div>
                        <label for="email" class="block text-sm font-medium text-text-secondary mb-2">Email Address</label>
                        <input type="email" id="email" name="email" value="gamer@example.com" class="w-full bg-surface-800 border border-surface-700 rounded-gaming px-4 py-3 text-text-primary form-field-gaming focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary" required />
                        <div id="emailError" class="mt-1 text-sm text-error hidden">Please enter a valid email address</div>
                        <div id="emailSuccess" class="mt-1 text-sm text-success hidden">Email format is valid</div>
                    </div>

                    <!-- Username -->
                    <div>
                        <label for="username" class="block text-sm font-medium text-text-secondary mb-2">Username</label>
                        <input type="text" id="username" name="username" value="ProGamer2025" class="w-full bg-surface-800 border border-surface-700 rounded-gaming px-4 py-3 text-text-primary form-field-gaming focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary" required minlength="3" maxlength="20" />
                        <div id="usernameError" class="mt-1 text-sm text-error hidden">Username must be 3-20 characters</div>
                        <div id="usernameSuccess" class="mt-1 text-sm text-success hidden">Username is available</div>
                        <div id="usernameLoading" class="mt-1 text-sm text-text-secondary hidden flex items-center">
                            <div class="w-3 h-3 border border-primary border-t-transparent rounded-full animate-spin mr-2"></div>
                            Checking availability...
                        </div>
                    </div>

                    <!-- Country -->
                    <div>
                        <label for="country" class="block text-sm font-medium text-text-secondary mb-2">Country</label>
                        <select id="country" name="country" class="w-full bg-surface-800 border border-surface-700 rounded-gaming px-4 py-3 text-text-primary form-field-gaming focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary" required>
                            <option value>Select Country</option>
                            <option value="US" selected>🇺🇸 United States</option>
                            <option value="CA">🇨🇦 Canada</option>
                            <option value="GB">🇬🇧 United Kingdom</option>
                            <option value="DE">🇩🇪 Germany</option>
                            <option value="FR">🇫🇷 France</option>
                            <option value="JP">🇯🇵 Japan</option>
                            <option value="KR">🇰🇷 South Korea</option>
                            <option value="AU">🇦🇺 Australia</option>
                            <option value="BR">🇧🇷 Brazil</option>
                            <option value="IN">🇮🇳 India</option>
                        </select>
                    </div>

                    <!-- Read-only Status -->
                    <div>
                        <label class="block text-sm font-medium text-text-secondary mb-2">Account Status (Read-only)</label>
                        <div class="bg-surface-800 border border-surface-700 rounded-gaming px-4 py-3 flex items-center">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success/20 text-success border border-success/30">
                                <div class="w-2 h-2 bg-success rounded-full mr-1.5"></div>
                                Active
                            </span>
                        </div>
                    </div>

                    <!-- Read-only Role -->
                    <div>
                        <label class="block text-sm font-medium text-text-secondary mb-2">Role (Read-only)</label>
                        <div class="bg-surface-800 border border-surface-700 rounded-gaming px-4 py-3 flex items-center">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary/20 text-primary border border-primary/30">
                                Community Member
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Password Section -->
            <div class="bg-surface rounded-gaming-card shadow-gaming border border-surface-700 p-6 sm:p-8">
                <h2 class="text-xl font-semibold text-gaming-heading mb-6 flex items-center">
                    <svg class="w-6 h-6 text-primary mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                    </svg>
                    Change Password
                </h2>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- New Password -->
                    <div>
                        <label for="newPassword" class="block text-sm font-medium text-text-secondary mb-2">New Password</label>
                        <div class="relative">
                            <input type="password" id="newPassword" name="newPassword" class="w-full bg-surface-800 border border-surface-700 rounded-gaming px-4 py-3 pr-12 text-text-primary form-field-gaming focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary" minlength="8" />
                            <button type="button" class="absolute inset-y-0 right-0 pr-3 flex items-center text-text-secondary hover:text-text-primary" onclick="togglePasswordVisibility('newPassword')">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                </svg>
                            </button>
                        </div>
                        <!-- Password Strength Indicator -->
                        <div class="mt-2">
                            <div class="flex space-x-1">
                                <div id="strength1" class="h-1 w-1/4 bg-surface-700 rounded-full transition-colors duration-gaming"></div>
                                <div id="strength2" class="h-1 w-1/4 bg-surface-700 rounded-full transition-colors duration-gaming"></div>
                                <div id="strength3" class="h-1 w-1/4 bg-surface-700 rounded-full transition-colors duration-gaming"></div>
                                <div id="strength4" class="h-1 w-1/4 bg-surface-700 rounded-full transition-colors duration-gaming"></div>
                            </div>
                            <p id="strengthText" class="text-xs text-text-secondary mt-1">Password strength will appear here</p>
                        </div>
                    </div>

                    <!-- Confirm Password -->
                    <div>
                        <label for="confirmPassword" class="block text-sm font-medium text-text-secondary mb-2">Confirm Password</label>
                        <div class="relative">
                            <input type="password" id="confirmPassword" name="confirmPassword" class="w-full bg-surface-800 border border-surface-700 rounded-gaming px-4 py-3 pr-12 text-text-primary form-field-gaming focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary" />
                            <button type="button" class="absolute inset-y-0 right-0 pr-3 flex items-center text-text-secondary hover:text-text-primary" onclick="togglePasswordVisibility('confirmPassword')">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                </svg>
                            </button>
                        </div>
                        <div id="passwordMatchError" class="mt-1 text-sm text-error hidden">Passwords do not match</div>
                        <div id="passwordMatchSuccess" class="mt-1 text-sm text-success hidden">Passwords match</div>
                    </div>
                </div>

                <!-- Password Requirements -->
                <div class="mt-4 p-4 bg-surface-800 rounded-gaming border border-surface-700">
                    <h4 class="text-sm font-medium text-text-primary mb-2">Password Requirements:</h4>
                    <ul class="text-xs text-text-secondary space-y-1">
                        <li class="flex items-center">
                            <span id="req-length" class="w-4 h-4 mr-2 text-surface-700">●</span>
                            At least 8 characters long
                        </li>
                        <li class="flex items-center">
                            <span id="req-uppercase" class="w-4 h-4 mr-2 text-surface-700">●</span>
                            Contains uppercase letter
                        </li>
                        <li class="flex items-center">
                            <span id="req-lowercase" class="w-4 h-4 mr-2 text-surface-700">●</span>
                            Contains lowercase letter
                        </li>
                        <li class="flex items-center">
                            <span id="req-number" class="w-4 h-4 mr-2 text-surface-700">●</span>
                            Contains number
                        </li>
                        <li class="flex items-center">
                            <span id="req-special" class="w-4 h-4 mr-2 text-surface-700">●</span>
                            Contains special character
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row gap-4 justify-end">
                <a href="user_profile_view.html" class="inline-flex items-center justify-center px-6 py-3 border border-surface-700 text-text-primary font-medium rounded-gaming btn-gaming hover:bg-surface-700 focus:outline-none focus:ring-2 focus:ring-surface-700 focus:ring-offset-2 focus:ring-offset-surface transition-colors duration-gaming">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                    Cancel
                </a>
                <button type="submit" class="inline-flex items-center justify-center px-6 py-3 bg-primary text-background font-medium rounded-gaming btn-gaming hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-surface transition-colors duration-gaming">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    Save Changes
                </button>
            </div>
        </form>

        <!-- Success/Error Messages -->
        <div id="successMessage" class="fixed top-20 right-4 bg-success text-background px-6 py-4 rounded-gaming shadow-gaming-lg hidden z-50">
            <div class="flex items-center">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                </svg>
                Profile updated successfully!
            </div>
        </div>

        <div id="errorMessage" class="fixed top-20 right-4 bg-error text-background px-6 py-4 rounded-gaming shadow-gaming-lg hidden z-50">
            <div class="flex items-center">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
                <span id="errorText">An error occurred. Please try again.</span>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-surface border-t border-surface-700 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="text-center">
                <p class="text-text-secondary text-sm">© 2025 GameHub. All Rights Reserved.</p>
                <p class="text-text-secondary text-xs mt-2">Empowering gamers worldwide</p>
            </div>
        </div>
    </footer>

    <!-- Mobile Navigation Menu (Hidden by default) -->
    <div class="md:hidden fixed inset-0 z-50 hidden" id="mobile-menu">
        <div class="fixed inset-0 bg-background/80 backdrop-blur-sm" onclick="toggleMobileMenu()"></div>
        <div class="fixed top-0 right-0 w-64 h-full bg-surface border-l border-surface-700 p-6">
            <div class="flex justify-between items-center mb-8">
                <span class="text-lg font-bold text-gaming-heading">Menu</span>
                <button type="button" class="text-text-secondary hover:text-text-primary" onclick="toggleMobileMenu()">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <nav class="space-y-4">
                <a href="user_profile_view.html" class="block text-text-secondary hover:text-text-primary py-2">Profile</a>
                <a href="streamer_application.html" class="block text-text-secondary hover:text-text-primary py-2">Streamer</a>
                <a href="player_application.html" class="block text-text-secondary hover:text-text-primary py-2">Player</a>
            </nav>
        </div>
    </div>

    <script>
        // Mobile menu toggle
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // File upload handling
        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file) {
                validateAndPreviewFile(file);
            }
        }

        function handleDrop(event) {
            event.preventDefault();
            const dropZone = document.getElementById('dropZone');
            dropZone.classList.remove('border-primary');
            
            const files = event.dataTransfer.files;
            if (files.length > 0) {
                validateAndPreviewFile(files[0]);
            }
        }

        function handleDragOver(event) {
            event.preventDefault();
            const dropZone = document.getElementById('dropZone');
            dropZone.classList.add('border-primary');
        }

        function handleDragLeave(event) {
            event.preventDefault();
            const dropZone = document.getElementById('dropZone');
            dropZone.classList.remove('border-primary');
        }

        function validateAndPreviewFile(file) {
            // Validate file type
            const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'];
            if (!validTypes.includes(file.type)) {
                showError('Please select a valid image file (JPG, PNG, GIF)');
                return;
            }

            // Validate file size (5MB)
            if (file.size > 5 * 1024 * 1024) {
                showError('File size must be less than 5MB');
                return;
            }

            // Show upload status
            const uploadStatus = document.getElementById('uploadStatus');
            uploadStatus.classList.remove('hidden');

            // Preview image
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('profilePreview').src = e.target.result;
                uploadStatus.classList.add('hidden');
            };
            reader.readAsDataURL(file);
        }

        // Password visibility toggle
        function togglePasswordVisibility(fieldId) {
            const field = document.getElementById(fieldId);
            const type = field.getAttribute('type') === 'password' ? 'text' : 'password';
            field.setAttribute('type', type);
        }

        // Password strength checker
        document.getElementById('newPassword').addEventListener('input', function(e) {
            const password = e.target.value;
            checkPasswordStrength(password);
            checkPasswordRequirements(password);
        });

        function checkPasswordStrength(password) {
            let strength = 0;
            const indicators = ['strength1', 'strength2', 'strength3', 'strength4'];
            const strengthText = document.getElementById('strengthText');

            // Reset indicators
            indicators.forEach(id => {
                document.getElementById(id).className = 'h-1 w-1/4 bg-surface-700 rounded-full transition-colors duration-gaming';
            });

            if (password.length >= 8) strength++;
            if (/[A-Z]/.test(password)) strength++;
            if (/[a-z]/.test(password)) strength++;
            if (/[0-9]/.test(password)) strength++;
            if (/[^A-Za-z0-9]/.test(password)) strength++;

            const colors = ['bg-error', 'bg-warning', 'bg-warning', 'bg-accent', 'bg-success'];
            const texts = ['Very Weak', 'Weak', 'Fair', 'Good', 'Strong'];

            for (let i = 0; i < Math.min(strength, 4); i++) {
                document.getElementById(indicators[i]).className = `h-1 w-1/4 ${colors[strength - 1]} rounded-full transition-colors duration-gaming`;
            }

            if (password.length > 0) {
                strengthText.textContent = texts[Math.max(0, strength - 1)];
                strengthText.className = `text-xs mt-1 ${strength < 3 ? 'text-warning' : strength < 4 ? 'text-accent' : 'text-success'}`;
            } else {
                strengthText.textContent = 'Password strength will appear here';
                strengthText.className = 'text-xs text-text-secondary mt-1';
            }
        }

        function checkPasswordRequirements(password) {
            const requirements = [
                { id: 'req-length', test: password.length >= 8 },
                { id: 'req-uppercase', test: /[A-Z]/.test(password) },
                { id: 'req-lowercase', test: /[a-z]/.test(password) },
                { id: 'req-number', test: /[0-9]/.test(password) },
                { id: 'req-special', test: /[^A-Za-z0-9]/.test(password) }
            ];

            requirements.forEach(req => {
                const element = document.getElementById(req.id);
                if (req.test) {
                    element.textContent = '✓';
                    element.className = 'w-4 h-4 mr-2 text-success';
                } else {
                    element.textContent = '●';
                    element.className = 'w-4 h-4 mr-2 text-surface-700';
                }
            });
        }

        // Password confirmation check
        document.getElementById('confirmPassword').addEventListener('input', function(e) {
            const password = document.getElementById('newPassword').value;
            const confirm = e.target.value;
            const errorDiv = document.getElementById('passwordMatchError');
            const successDiv = document.getElementById('passwordMatchSuccess');

            if (confirm.length > 0) {
                if (password === confirm) {
                    errorDiv.classList.add('hidden');
                    successDiv.classList.remove('hidden');
                } else {
                    errorDiv.classList.remove('hidden');
                    successDiv.classList.add('hidden');
                }
            } else {
                errorDiv.classList.add('hidden');
                successDiv.classList.add('hidden');
            }
        });

        // Email validation
        document.getElementById('email').addEventListener('input', function(e) {
            const email = e.target.value;
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            const errorDiv = document.getElementById('emailError');
            const successDiv = document.getElementById('emailSuccess');

            if (email.length > 0) {
                if (emailRegex.test(email)) {
                    errorDiv.classList.add('hidden');
                    successDiv.classList.remove('hidden');
                } else {
                    errorDiv.classList.remove('hidden');
                    successDiv.classList.add('hidden');
                }
            } else {
                errorDiv.classList.add('hidden');
                successDiv.classList.add('hidden');
            }
        });

        // Username availability check (simulated)
        let usernameTimeout;
        document.getElementById('username').addEventListener('input', function(e) {
            const username = e.target.value;
            const errorDiv = document.getElementById('usernameError');
            const successDiv = document.getElementById('usernameSuccess');
            const loadingDiv = document.getElementById('usernameLoading');

            clearTimeout(usernameTimeout);

            if (username.length < 3 || username.length > 20) {
                errorDiv.classList.remove('hidden');
                successDiv.classList.add('hidden');
                loadingDiv.classList.add('hidden');
                return;
            }

            errorDiv.classList.add('hidden');
            successDiv.classList.add('hidden');
            loadingDiv.classList.remove('hidden');

            usernameTimeout = setTimeout(() => {
                // Simulate API call
                loadingDiv.classList.add('hidden');
                if (username.toLowerCase() === 'admin' || username.toLowerCase() === 'test') {
                    errorDiv.textContent = 'Username is already taken';
                    errorDiv.classList.remove('hidden');
                } else {
                    successDiv.classList.remove('hidden');
                }
            }, 1000);
        });

        // Form submission
        document.getElementById('profileEditForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Simulate form submission
            const submitButton = e.target.querySelector('button[type="submit"]');
            const originalText = submitButton.innerHTML;
            
            submitButton.innerHTML = `
                <div class="w-5 h-5 border-2 border-background border-t-transparent rounded-full animate-spin mr-2"></div>
                Saving...
            `;
            submitButton.disabled = true;

            setTimeout(() => {
                submitButton.innerHTML = originalText;
                submitButton.disabled = false;
                showSuccess();
            }, 2000);
        });

        function showSuccess() {
            const successMessage = document.getElementById('successMessage');
            successMessage.classList.remove('hidden');
            setTimeout(() => {
                successMessage.classList.add('hidden');
                // Redirect to profile view
                window.location.href = 'user_profile_view.html';
            }, 3000);
        }

        function showError(message) {
            const errorMessage = document.getElementById('errorMessage');
            const errorText = document.getElementById('errorText');
            errorText.textContent = message;
            errorMessage.classList.remove('hidden');
            setTimeout(() => {
                errorMessage.classList.add('hidden');
            }, 5000);
        }
    </script>
</body>
</html>